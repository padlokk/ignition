================================================================================
 ðŸŽ¯ IGNITION TASK BACKLOG
================================================================================
Legend: [Story Points] ID â€” Title (Milestone)
Updated: 2025-09-27

--------------------------------------------------------------------------------
 PHASE 0 â€” Discovery Alignment (5 pts)
--------------------------------------------------------------------------------
[2] IG-0001 â€” Publish IGNITE_CONCEPTS (M0.1)
  â€¢ Write & review canonical concept doc with security + platform leads.
  â€¢ Acceptance: Document merged; review notes addressed; open questions logged.

[3] IG-0002 â€” Cage Capability Inventory (M0.2)
  â€¢ Map Cage modules leveraged by Ignite; capture gaps and risks, including recipient management APIs.
  â€¢ Acceptance: Inventory summary appended to CONTINUE.md; dependencies filed.

--------------------------------------------------------------------------------
 PHASE 1 â€” Authority Core (25 pts)
--------------------------------------------------------------------------------
[3] IG-0101 â€” AuthorityChain Persistence MVP (M1.1)
  â€¢ Implement storage adapter (filesystem vault) + tamper-evident hashing.
  â€¢ Acceptance: Unit tests for add/get/remove; metadata hash verified.

[5] IG-0102 â€” Metadata Schema & Migration Plan (M1.1)
  â€¢ Define metadata fields, versioning, migration hooks.
  â€¢ Acceptance: Schema doc + tests ensuring backward-compatibility guard.

[4] IG-0103 â€” Real Signature Engine (M1.2)
  â€¢ Integrate Ed25519 (or decision) for authority/subject proofs.
  â€¢ Acceptance: Validation tests for valid/invalid pairings using canonical JSON payloads; mock removed.

[2] IG-0104 â€” Proof Expiry Scheduler (M1.2)
  â€¢ STATUS: Proof expiry checks implemented (ProofBundle::verify() checks expires_at).
  â€¢ Implement renewal trigger stubs and background job scheduler.
  â€¢ Acceptance: Renewal job flagged TODO with design doc; scheduler stub callable from CLI.

[4] IG-0105 â€” Passphrase/Expiration Policy Engine (M1.3)
  â€¢ STATUS: `AuthorityKey::is_expired()` implemented; default `ExpirationPolicy` + `PassphraseStrengthPolicy` wired through CLI create.
  â€¢ Remaining: Port Argon2id-based `PassphraseHash`, reuse-prevention, and ignition-specific expiry checks (handled in IG-0202).
  â€¢ Acceptance: Policy tests; config controls strength + expiration settings; ignition wrapping enforces same policies.

[3] IG-0106 â€” Danger Mode Safeguards (M1.3)
  â€¢ Implement env + CLI confirmations; log override attempts.
  â€¢ Acceptance: CLI prompts verified; automated bypass requires flags.

[3] IG-0107 â€” Authority Proof Confidence Suite (M1.2)
  â€¢ Build unit/integration tests covering signature tampering, expiry, and replay.
  â€¢ Acceptance: Tests simulate forged signatures, stale proofs, mismatched payloads; engine rejects all.

[3] IG-0108 â€” RSB Module Compliance (M1.1)
  â€¢ Align module layout with `MODULE_SPEC`/`PRELUDE_POLICY`; isolate adapters.
  â€¢ Acceptance: Module tree reorganized; preludes document exports; hub namespace usage audited.

[4] IG-0109 â€” Operation Validation Engine (M1.2)
  â€¢ Port `AuthorityValidationEngine` from code_ref to live implementation.
  â€¢ Implement pre-operation validation: check key expiration, proof expiration, authority relationships.
  â€¢ Validation runs before any encrypt/decrypt/rotate/revoke operation.
  â€¢ Acceptance: Validation engine rejects expired keys/proofs with clear error messages; integration tests verify enforcement.
  â€¢ Dependencies: IG-0105 (for is_expired methods), IG-0103 (for proof verification).

[5] IG-0110 â€” Pluggable Authority Topology (Backlog)
  â€¢ Extract Xâ†’Mâ†’Râ†’Iâ†’D hierarchy rules into an `AuthorityTopology` trait so Ignite can host alternate structures (e.g., software licensing).
  â€¢ AuthorityChain/PolicyEngine consume topology via dependency injection; CLI/storage leverage `topology.all_key_types()` instead of fixed lists.
  â€¢ Acceptance: Default Padlock topology untouched; a sample alternate topology can be registered and exercised via unit tests.
  â€¢ Dependencies: AuthorityChain implementation complete; PolicyEngine available for topology-aware defaults.

--------------------------------------------------------------------------------
 PHASE 2 â€” Ignition Operations (31 pts)
--------------------------------------------------------------------------------
[5] IG-0201 â€” Key Generation Flow (M2.1)
  â€¢ Wire `AuthorityAgeKeyGenerator` to storage + audit logging.
  â€¢ Persist recipient set versions alongside new keys.
  â€¢ Add operation-time validation: check key expiration + proof expiration before encrypt/decrypt.
  â€¢ Acceptance: Integration test creates Xâ†’Mâ†’R chain; logs capture recipient hashes; operations reject expired keys.

[4] IG-0202 â€” Ignition Wrap & Passphrase UX (M2.1)
  â€¢ Port `IgnitionKey`, `PassphraseHash`, Argon2id KDF, and reuse-prevention from code_ref into live module.
  â€¢ Implement passphrase prompts/env handling; secure storage of wrapped keys.
  â€¢ Integrate PolicyEngine passphrase validation + expiration checks in `IgnitionKey::unlock()`.
  â€¢ Acceptance: I/D key creation flows pass UX review; unlock enforces expiration; recipient public materials exported for Cage.
  â€¢ Dependencies: IG-0105 (policy engine), IG-0109 (validation engine).

[5] IG-0203 â€” Lineage Recording & Proof Emission (M2.1)
  â€¢ Persist authority proofs + subject proofs in vault.
  â€¢ Acceptance: Verifier CLI confirms lineage and recipient membership for each key.

[4] IG-0204 â€” Rotation Cascade Engine (M2.2)
  â€¢ Invalidate descendants on parent rotation; generate revocation records.
  â€¢ Acceptance: Tests show child keys unusable post-rotation; recipient sets rebuilt; affected-keys manifest generated.

[4] IG-0205 â€” Tombstone Registry (M2.2)
  â€¢ Prevent re-use of revoked fingerprints; add audit log entries.
  â€¢ Acceptance: Attempt to reinstate revoked key fails with specific error.

[4] IG-0206 â€” Status & Discovery CLI (M2.3)
  â€¢ Implement `ignite ls`, `ignite status` command handlers.
  â€¢ Acceptance: CLI outputs include expiry warnings and recipient set summaries.

[2] IG-0208 â€” Age Binary Guard (M2.1)
  â€¢ Ensure runtime checks surface a clear error when `age` is missing.
  â€¢ Acceptance: CLI/unit tests simulate missing binary and receive actionable guidance.

[5] IG-0209 â€” Master-as-Recovery-Recipient (M2.1)
  â€¢ Implement automatic Master inclusion in recipient sets for Repo/Ignition/Distro encryption.
  â€¢ Add `AuthorityChain::find_master_ancestor()` to walk chain upward to Master level.
  â€¢ Add recipient building logic to include both target key and Master for recovery access.
  â€¢ Wire into encryption operations so Master can always decrypt child-encrypted artifacts.
  â€¢ Acceptance: Tests verify Master included in all R/I/D recipient sets; Master can decrypt artifacts encrypted by descendants; Skull/Master encryptions exclude this behavior.
  â€¢ Dependencies: IG-0201 (Key Generation Flow), AuthorityChain implementation complete.
  â€¢ Complexity: Chain traversal logic + recipient set assembly + encryption integration + edge cases.

[3] IG-0207 â€” Affected-Key Manifest Schema (M2.2)
  â€¢ Define manifest JSON (fingerprint, md5, scope, issued_at) and hashing rules.
  â€¢ Acceptance: Rotation writes manifest; validation job verifies digest integrity.

--------------------------------------------------------------------------------
 PHASE 3 â€” CLI & Integration (18 pts)
--------------------------------------------------------------------------------
[3] IG-0301 â€” RSB Bootstrap & Dispatch (M3.1)
  â€¢ Create `src/bin/cli_ignite.rs` with `bootstrap!` + `dispatch!`.
  â€¢ Acceptance: `ignite help` / `ignite inspect` functional.

[3] IG-0302 â€” Command Handler Wiring (M3.1)
  â€¢ Route create/rotate/revoke/status commands to authority ops layer.
  â€¢ Acceptance: Smoke tests cover happy/error paths.

[4] IG-0303 â€” Cage Bridge Validation (M3.2)
  â€¢ Ensure CRUD operations respect authority checks and recipient constraints.
  â€¢ Acceptance: Integration tests pass with sample repo fixtures.

[4] IG-0304 â€” Audit Correlation Enhancements (M3.2)
  â€¢ Include key fingerprints + recipient set hashes + operation IDs in audit records.
  â€¢ Acceptance: Audit logs correlate operations across Cage & Ignite.

[3] IG-0306 â€” CLI Confidence Harness (M3.1)
  â€¢ Add smoke tests (`cargo test cli_smoke`) covering admin/dev command flows.
  â€¢ Acceptance: Harness exercises create/rotate/revoke/status with mock data and verifies proofs/manifest output.

[3] IG-0307 â€” Test Ceremony Implementation (M3.2)
  â€¢ Implement RSB test organization + ceremony scripts per TEST_ORGANIZATION standard.
  â€¢ Acceptance: tests/ directory matches structure; `tests/sh/ceremony.sh` drives suites; `test.sh` orchestrates.

[4] IG-0305 â€” Automation Channel Templates (M3.3)
  â€¢ Provide CI examples + secret management shim for env passphrases and recipient distribution.
  â€¢ Acceptance: Example pipeline runs in dry-run; docs updated.

--------------------------------------------------------------------------------
 PHASE 4 â€” Hardening & Release (14 pts)
--------------------------------------------------------------------------------
[5] IG-0401 â€” Security Drill Suite (M4.1)
  â€¢ Run tabletop & simulated breach scenarios; capture action items.
  â€¢ Acceptance: Report archived; follow-ups logged in TASKS backlog.

[4] IG-0402 â€” Operator Documentation Pack (M4.2)
  â€¢ Produce runbooks, troubleshooting guide, recovery checklist.
  â€¢ Acceptance: Ops team review sign-off recorded.

[5] IG-0403 â€” Release Candidate Cut (M4.3)
  â€¢ Tag v0.1.0, run full test matrix, prep handoff checklist.
  â€¢ Acceptance: Release artifact published; CONTINUE.md updated.

--------------------------------------------------------------------------------
 BACKLOG MAINTENANCE
--------------------------------------------------------------------------------
â€¢ Update CONTINUE.md at session end with progress and blockers.
â€¢ Adjust story points as implementation details solidify.
â€¢ Reference ROADMAP milestones when editing or adding tasks.
[3] IG-0111 â€” Policy Configuration Surface (Backlog)
  â€¢ Allow loading policy defaults (expiration windows, strength rules) from config file or CLI flags.
  â€¢ Acceptance: PolicyEngine reads overrides; documentation updated with configuration examples.

[3] IG-0303 â€” CLI Command Extraction (Backlog)
  â€¢ Move command handlers out of `src/bin/cli_ignite.rs` into `ignite::cli::commands` for reuse/testing.
  â€¢ Acceptance: Unit tests cover handlers; binary calls through the module layer.
